# üêâ DnD Scheduler API

Backend —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Dungeons & Dragons —Å–µ—Å—Å–∏–π. –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (FastAPI + SQLAlchemy); —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –≥—Ä—É–ø–ø–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–Ω–≤–∞–π—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ `/health`

## üõ† –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (–±–µ–∫–µ–Ω–¥ + –±–∞–∑–∞)
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–µ–≥–æ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç backend-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä):
   ```env
   DATABASE_URL="postgresql+psycopg://app:app@db:5432/dnd"
   CORS_ORIGINS=["http://localhost:3000"]
   ```
2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker compose -f .docker/docker-compose.yml up --build -d
   ```
   - API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`
   - pgAdmin –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ `http://localhost:5050` (email: `admin@example.com`, –ø–∞—Ä–æ–ª—å: `admin`)
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ backend-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
   ```bash
   docker compose -f .docker/docker-compose.yml exec backend alembic upgrade head
   ```
4. –î–ª—è –±—ç–∫–∞–ø–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –≤–∫–ª—é—á–∏—Ç–µ —Å–µ—Ä–≤–∏—Å `db-backup` (–ø–∏—à–µ—Ç –¥–∞–º–ø—ã –≤ `./backups` –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞, –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è `BACKUP_INTERVAL`):
   ```bash
   docker compose -f .docker/docker-compose.yml up -d db-backup
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ compose):
   ```bash
   docker compose -f .docker/docker-compose.yml up -d db
   ```
2. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install --upgrade pip
   pip install -r backend/requirements.txt
   ```
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```env
   DATABASE_URL="postgresql+psycopg://app:app@localhost:5432/dnd"
   CORS_ORIGINS=["http://localhost:3000"]
   ```
4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—Ç–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é:
   ```bash
   cd backend
   alembic upgrade head
   ```
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
   ```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ `/docs`.

## üè≠ –ó–∞–º–µ—á–∞–Ω–∏–µ –ø–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ª—É—á—à–µ –¥–µ—Ä–∂–∞—Ç—å –±–∞–∑—É –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —É–ø—Ä–∞–≤–ª—è–µ–º–æ–º —Å–µ—Ä–≤–∏—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, cloud-PostgreSQL) –∏–ª–∏ —Ö–æ—Ç—è –±—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º volume –∏ –±—ç–∫–∞–ø–∞–º–∏.

- **–£–ø—Ä–∞–≤–ª—è–µ–º–∞—è –ë–î:** —Å–æ–∑–¥–∞–π—Ç–µ PostgreSQL –≤ –æ–±–ª–∞–∫–µ –∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ `DATABASE_URL` –≤ `.env`, –∑–∞—Ç–µ–º –ø–æ–¥–Ω–∏–º–∏—Ç–µ —Ç–æ–ª—å–∫–æ backend:
  ```bash
  DATABASE_URL="postgresql+psycopg://user:password@your-managed-host:5432/dbname?sslmode=require"
  docker compose -f .docker/docker-compose.prod.yml up --build -d
  ```
  –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø—Ä–æ—â–µ –æ—Ç–∫–ª—é—á–∏—Ç—å pgAdmin –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π Postgres: –æ–Ω–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `docker-compose.prod.yml`.

- **–û—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å volume –∏ –±—ç–∫–∞–ø–∞–º–∏:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.docker/docker-compose.yml`, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç Postgres —Å volume `pgdata` –∏ —Å–µ—Ä–≤–∏—Å–æ–º `db-backup`, –¥–µ–ª–∞—é—â–∏–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –¥–∞–º–ø—ã –≤ `./backups`. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å offsite-–±—ç–∫–∞–ø—ã –∏ —Ä–æ—Ç–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

–•—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–¥–æ–≤—É—é –ë–î –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äî –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞: –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞ –∏–ª–∏ –ø–æ—Ç–µ—Ä–µ volume –º–æ–∂–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ, —Å–ª–æ–∂–Ω–µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License. –°–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –∏–∑–º–µ–Ω—è–π—Ç–µ –∏ —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ.
